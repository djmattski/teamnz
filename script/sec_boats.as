package script  {		import flash.display.*;	import flash.events.*;	import flash.geom.*;	import com.greensock.*;	import com.greensock.easing.*;	import com.greensock.events.LoaderEvent; 	import com.greensock.loading.*; 				public class sec_boats extends Sprite{		private var boat_right:Sprite;		private var boat_left:Sprite;		private var boat_title:sec_3_title;		private var boat_intro:sec_3_intro;		private var boat_specs:sec_3_boat_specs;		private var boat_nav_design:sec_3_design_process_button;		private var boat_nav_sail:sec_3_sail_facts_button;		private var boat_nav_boats:sec_3_the_boats_button;		private var boat_nav_wing:sec_3_wing_facts_button;		private var boat_3d:boat_frames;		private var boat_sliderMc:boats_slider;		private var boat_img_gal:Sprite;		private var boat_img_gal_icon:global_image_gallery_icon;		private var boat_vid_gal:Sprite;		private var boat_vid_gal_icon:global_video_gallery_icon;		private var theAppBase:appBase;				//Slider		private var animLength : int;		private var leftBound : Number;		private var rightBound : Number;		private var dragBound : Rectangle;		private var calcWidth : Number;		//				public function sec_boats(mainApp) {			// constructor code						theAppBase = mainApp;						/** SPLIT HOLDERS **/			boat_right = new Sprite();			boat_right.name = 'boat_right';			boat_right.x = 1300;			boat_right.y = 0;			addChild(boat_right);						boat_left = new Sprite();			boat_left.name = 'boat_left';			boat_left.x = -1300;			boat_left.y = 310; // The height of the first half of the container + white border			addChild(boat_left);			/**/									//Right elements			boat_title = new sec_3_title();			boat_title.name = 'boat_title';			boat_title.x = 25;			boat_title.y = 45;			boat_right.addChild(boat_title);									boat_3d = new boat_frames();			boat_3d.name = 'boat_3d';			boat_3d.x = 510;			boat_3d.y = 10;			boat_right.addChild(boat_3d);						//THE SLIDER			boat_sliderMc = new boats_slider();			boat_sliderMc.name = 'boat_sliderMc';			boat_sliderMc.x = boat_3d.x;			boat_sliderMc.y = boat_3d.y + boat_3d.height + 12;			boat_sliderMc.sec_3_slide.buttonMode = true;			boat_sliderMc.sec_3_slide.addEventListener(MouseEvent.MOUSE_DOWN, handleMouseEvents);			boat_right.addChild(boat_sliderMc);						animLength = boat_3d.totalFrames;			leftBound = boat_sliderMc.scrubBarMC.x;			rightBound = (boat_sliderMc.scrubBarMC.x + boat_sliderMc.scrubBarMC.width) - boat_sliderMc.sec_3_slide.width;			//dragBound = new Rectangle(leftBound, boat_sliderMc.sec_3_slide.y, boat_sliderMc.sec_3_slide.width, 0);			dragBound = new Rectangle(leftBound, boat_sliderMc.sec_3_slide.y, rightBound, 0);			calcWidth = boat_sliderMc.scrubBarMC.width / animLength;						boat_intro = new sec_3_intro();			boat_intro.name = 'boat_intro';			boat_intro.x = 25;			boat_intro.y = 150;			boat_right.addChild(boat_intro);						//Nav els			boat_nav_design = new sec_3_design_process_button();			boat_nav_design.name = 'sec_3_sub_1';			boat_nav_design.x = 25;			boat_nav_design.y = 95;			boat_nav_design.buttonMode = true;			boat_nav_design.addEventListener(MouseEvent.ROLL_OVER, appBase.rollOn);			boat_nav_design.addEventListener(MouseEvent.ROLL_OUT, appBase.rollOff);			boat_nav_design.addEventListener(MouseEvent.MOUSE_DOWN, theAppBase.newSub);			boat_right.addChild(boat_nav_design);						boat_nav_sail = new sec_3_sail_facts_button();			boat_nav_sail.name = 'sec_3_sub_2';			boat_nav_sail.x = boat_nav_design.x + boat_nav_design.width + 5;			boat_nav_sail.y = boat_nav_design.y;			boat_nav_sail.buttonMode = true;			boat_nav_sail.addEventListener(MouseEvent.ROLL_OVER, appBase.rollOn);			boat_nav_sail.addEventListener(MouseEvent.ROLL_OUT, appBase.rollOff);			boat_right.addChild(boat_nav_sail);						boat_nav_boats = new sec_3_the_boats_button();			boat_nav_boats.name = 'sec_3_sub_3';			boat_nav_boats.x = boat_nav_sail.x + boat_nav_sail.width + 5;			boat_nav_boats.y = boat_nav_design.y;			boat_nav_boats.buttonMode = true;			boat_nav_boats.addEventListener(MouseEvent.ROLL_OVER, appBase.rollOn);			boat_nav_boats.addEventListener(MouseEvent.ROLL_OUT, appBase.rollOff);			boat_right.addChild(boat_nav_boats);						boat_nav_wing = new sec_3_wing_facts_button();			boat_nav_wing.name = 'sec_3_sub_4';			boat_nav_wing.x = boat_nav_boats.x + boat_nav_boats.width + 5;			boat_nav_wing.y = boat_nav_design.y;			boat_nav_wing.buttonMode = true;			boat_nav_wing.addEventListener(MouseEvent.ROLL_OVER, appBase.rollOn);			boat_nav_wing.addEventListener(MouseEvent.ROLL_OUT, appBase.rollOff);			boat_right.addChild(boat_nav_wing);						//Img gal			boat_img_gal = new Sprite();			boat_img_gal.name = 'boat_img_gal';			boat_img_gal.x = 850;			boat_img_gal.y = 90;			boat_img_gal.buttonMode = true;			boat_right.addChild(boat_img_gal);			giveMeACircleBtn('img_gal', 0x005462, 0x008298, boat_img_gal);			//Vid gall			boat_vid_gal = new Sprite();			boat_vid_gal.name = 'boat_vid_gal';			boat_vid_gal.x = 850;			boat_vid_gal.y = 178;			boat_vid_gal.buttonMode = true;			boat_right.addChild(boat_vid_gal);			giveMeACircleBtn('vid_gal', 0x005462, 0x008298, boat_vid_gal);									TweenLite.to(boat_right,1,{x:0,ease:Sine.easeOut});						//Left elements			boat_specs = new sec_3_boat_specs();			boat_specs.name = 'boat_specs';			boat_specs.x = 25;			boat_specs.y = 20;			boat_left.addChild(boat_specs);						TweenLite.to(boat_left,1.4,{x:0,ease:Sine.easeOut});							}				//Public functions		public function flyout(my_dispatch:customDispatcher):void{			TweenLite.to(boat_right,1,{x:1300,ease:Sine.easeIn});			TweenLite.to(boat_left,1.4,{x:-1300,ease:Sine.easeIn, onComplete:function(){				my_dispatch.dispatchEvent(new Event(my_dispatch.ACTION));			}});		}				//Private functions		private function handleMouseEvents(evt:MouseEvent):void{		   switch(String(evt.type)) {			  case MouseEvent.MOUSE_DOWN:				 boat_sliderMc.sec_3_slide.startDrag(false, dragBound);				 stage.addEventListener(MouseEvent.MOUSE_UP, handleMouseEvents);				 boat_3d.addEventListener(Event.ENTER_FRAME, scrubMovie);			  break;			  case MouseEvent.MOUSE_UP:				 boat_sliderMc.sec_3_slide.stopDrag();				 stage.removeEventListener(MouseEvent.MOUSE_UP, handleMouseEvents);				 boat_3d.removeEventListener(Event.ENTER_FRAME, scrubMovie);			  break;		   }		}				private function scrubMovie(evt:Event):void{		   var scrubPos : int = boat_sliderMc.sec_3_slide.x;		   var gotoFrame : int = Math.ceil(scrubPos / calcWidth);		   boat_3d.gotoAndStop(gotoFrame);		}						private function updateScrubber(evt:Event):void{		   var percent : Number = boat_3d.currentFrame / animLength;		   boat_sliderMc.sec_3_slide.x = percent * boat_sliderMc.scrubBarMC.width;		   		}				public function giveMeACircleBtn(theName:String, theColour1:uint, theColour2:uint, theContainer:Sprite):void{			var thisBack:Sprite = new Sprite();			thisBack.name = theName;			thisBack.graphics.beginFill(theColour1, 1);			thisBack.graphics.drawCircle(0, 0, 30);			thisBack.graphics.endFill();			//thisBack.width = 80;			//thisBack.height = 80;			theContainer.addChild(thisBack);			if(theName == 'img_gal'){				boat_img_gal_icon = new global_image_gallery_icon();				boat_img_gal_icon.x = (boat_img_gal_icon.width/2)*-1;				boat_img_gal_icon.y = (boat_img_gal_icon.height/2)*-1;				theContainer.addChild(boat_img_gal_icon);			}else{				boat_vid_gal_icon = new global_video_gallery_icon();				boat_vid_gal_icon.x = (boat_vid_gal_icon.width/2)*-1;				boat_vid_gal_icon.y = (boat_vid_gal_icon.height/2)*-1;				theContainer.addChild(boat_vid_gal_icon);			}			theContainer.addEventListener(MouseEvent.ROLL_OVER, function(){				//alter colour 				var my_color:ColorTransform = new ColorTransform();				my_color.color = theColour2;				thisBack.transform.colorTransform = my_color;			});			theContainer.addEventListener(MouseEvent.ROLL_OUT, function(){				//alter colour				var my_color:ColorTransform = new ColorTransform();				my_color.color = theColour1;				thisBack.transform.colorTransform = my_color;			});			theContainer.addEventListener(MouseEvent.MOUSE_DOWN, theAppBase.newSub);		}				/*		public function openGallery(e:MouseEvent):void{			trace(e.currentTarget.name);		}		*/	}	}